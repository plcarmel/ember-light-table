<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>addon/classes/Table.js - Ember Light Table</title>
    <meta name="description" content="Lightweight, component based table for Ember 3.4+">
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700' rel='stylesheet' type='text/css'>
    

</head>
<body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a href="../" class="navbar-brand">
              <img src="../assets/img/ember-logo.png" alt="enterprise logo">
            <span>Light Table</span>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="nav">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/offirgolan/ember-light-table" class="fa fa-github github"></a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div id="main-wrapper" class="row">
        <div id="content-wrapper">
            <ol class="panel-group" id="sidebar" role="tablist" aria-multiselectable="true">
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-search-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-search" aria-expanded="true" aria-controls="collapseOne">
                        Search
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-search" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-search-heading">
                        <div class="panel-body">
                            <div id="api-tabview-filter">
                                <input type="search" id="api-filter" placeholder="Search...">
                            </div>
                        </div>
                    </div>
                </li>
                    <li class="panel panel-default">
                        <div class="panel-heading" role="tab" id="sidebar-version-heading">
                            <h4 class="panel-title">
                                <a role="button" href="https://github.com/offirgolan/ember-light-table/commits/023109c2" target="_blank">
                                  Tag: 2.0.0-beta.5.023109c2
                                </a>
                            </h4>
                        </div>
                    </li>
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-modules-heading">
                        <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" href="#sidebar-modules" aria-expanded="true" aria-controls="collapseOne">
                      Modules
                    </a>
                  </h4>
                    </div>
                    <div id="sidebar-modules" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-modules-heading">
                        <div class="panel-body">
                                <ol>
                                        <li>
                                            <a href="../modules/Light Table.html">Light Table</a>
                                                    <li class="sub"><a href="../modules/Cell Types.html">Cell Types</a></li>
                                                    <li class="sub"><a href="../modules/Column Types.html">Column Types</a></li>
                                        </li>
                                        <li>
                                            <a href="../modules/Table.html">Table</a>
                                        </li>
                                        <li>
                                            <a href="../modules/Usage.html">Usage</a>
                                                    <li class="sub"><a href="../modules/Table Declaration.html">Table Declaration</a></li>
                                                    <li class="sub"><a href="../modules/Component Declaration.html">Component Declaration</a></li>
                                        </li>
                                        <li>
                                            <a href="../modules/Utils.html">Utils</a>
                                        </li>
                                </ol>
                        </div>
                    </div>
                </li>
            
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-classes-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-classes" aria-expanded="true" aria-controls="collapseOne">
                        Classes
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-classes" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-classes-heading">
                        <div class="panel-body">
                            <ol>
                                    <li>
                                        <a href="../classes/Base Cell.html">Base Cell</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Base Column.html">Base Column</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Column.html">Column</a>
                                    </li>
                                    <li>
                                        <a href="../classes/fixProto.html">fixProto</a>
                                    </li>
                                    <li>
                                        <a href="../classes/light-table.html">light-table</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Row.html">Row</a>
                                    </li>
                                    <li>
                                        <a href="../classes/t.body.html">t.body</a>
                                    </li>
                                    <li>
                                        <a href="../classes/t.foot.html">t.foot</a>
                                    </li>
                                    <li>
                                        <a href="../classes/t.head.html">t.head</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Table.html">Table</a>
                                    </li>
                            </ol>
                        </div>
                    </div>
                </li>
            </ol>
            <div class="content-container">
                <div class="apidocs">
                    <div id="docs-main">
                        <div class="content">
<div class="page-header">
    <h1><i class="fa fa-file-code-o" aria-hidden="true"></i>  File</h1>
</div>

<div class="file">
    <pre class="prettyprint linenums">
import { A as emberArray, isArray } from &#x27;@ember/array&#x27;;
import { assert } from &#x27;@ember/debug&#x27;;
import EmberObject, { computed, get } from &#x27;@ember/object&#x27;;
import Row from &#x27;ember-light-table/classes/Row&#x27;;
import Column from &#x27;ember-light-table/classes/Column&#x27;;
import SyncArrayProxy from &#x27;ember-light-table/-private/sync-array-proxy&#x27;;
import { mergeOptionsWithGlobals } from &#x27;ember-light-table/-private/global-options&#x27;;
import fixProto from &#x27;ember-light-table/utils/fix-proto&#x27;;
import { assign } from &#x27;@ember/polyfills&#x27;;
import { isNone, isEmpty } from &#x27;@ember/utils&#x27;;
import enforceUniqueness from &#x27;ember-light-table/utils/enforce-uniqueness&#x27;;

const RowSyncArrayProxy = SyncArrayProxy.extend({
  serializeContentObjects(objects) {
    return Table.createRows(objects);
  },

  serializeSyncArrayObjects(objects) {
    return objects.map((o) =&gt; get(o, &#x27;content&#x27;));
  }
});

/**
 * @module Table
 * @private
 */

/**
 * @module Table
 * @class Table
 */
export default class Table extends EmberObject.extend({
  /**
   * @property columns
   * @type {Ember.Array}
   * @default []
   */
  columns: null,

  /**
   * @property rows
   * @type {Ember.Array}
   * @default []
   */
  rows: null,

  /**
   * @property isEmpty
   * @type {Boolean}
   */
  isEmpty: computed.empty(&#x27;rows&#x27;).readOnly(),

  /**
   * @property expandedRows
   * @type {Ember.Array}
   */
  expandedRows: computed.filterBy(&#x27;rows&#x27;, &#x27;expanded&#x27;, true).readOnly(),

  /**
   * @property selectedRows
   * @type {Ember.Array}
   */
  selectedRows: computed.filterBy(&#x27;rows&#x27;, &#x27;selected&#x27;, true).readOnly(),

  /**
   * @property visibleRows
   * @type {Ember.Array}
   */
  visibleRows: computed.filterBy(&#x27;rows&#x27;, &#x27;hidden&#x27;, false).readOnly(),

  /**
   * Index of the row currently having the focus. Equals -1 if no row has the focus.
   *
   * @property focusIndex
   * @type {Number}
   */
  focusIndex: computed(&#x27;focusedRow&#x27;, {
    get() {
      let rows = this.get(&#x27;rows&#x27;);
      return rows.indexOf(this.get(&#x27;focusedRow&#x27;));
    },
    set(key, value) {
      let rows = this.get(&#x27;rows&#x27;);
      if (!isEmpty(rows)) {
        value = Math.min(rows.get(&#x27;length&#x27;) - 1, Math.max(0, value));
        if (value !== -1) {
          this.set(&#x27;focusedRow&#x27;, rows.objectAt(value));
        }
      } else {
        value = -1;
      }
      return value;
    }
  }),

  /**
   * Row currently having the focus. Equals &#x60;null&#x60; if no row has the focus.
   *
   * @property focusedRow
   * @type {Number}
   */
  focusedRow: computed(&#x27;rows.{[],@each.hasFocus}&#x27;, {
    get() {
      return this.get(&#x27;rows&#x27;).findBy(&#x27;hasFocus&#x27;);
    },
    set(key, value) {
      if (value) {
        value.set(&#x27;hasFocus&#x27;, true);
      } else {
        let r = this.get(&#x27;focusedRow&#x27;);
        if (r) {
          r.set(&#x27;hasFocus&#x27;, false);
        }
      }
      return value;
    }
  }),

  /**
   * There is at most one row that has focus.
   */
  _applyFocusRules: enforceUniqueness(&#x27;rows&#x27;, &#x27;hasFocus&#x27;),

  /**
   * @property sortableColumns
   * @type {Ember.Array}
   */
  sortableColumns: computed.filterBy(&#x27;visibleColumns&#x27;, &#x27;sortable&#x27;, true).readOnly(),

  /**
   * @property sortedColumns
   * @type {Ember.Array}
   */
  sortedColumns: computed.filterBy(&#x27;visibleColumns&#x27;, &#x27;sorted&#x27;, true).readOnly(),

  /**
   * @property hideableColumns
   * @type {Ember.Array}
   */
  hideableColumns: computed.filterBy(&#x27;allColumns&#x27;, &#x27;hideable&#x27;, true).readOnly(),

  /**
   * @property hiddenColumns
   * @type {Ember.Array}
   */
  hiddenColumns: computed.filterBy(&#x27;allColumns&#x27;, &#x27;hidden&#x27;, true).readOnly(),

  /**
   * @property responsiveHiddenColumns
   * @type {Ember.Array}
   */
  responsiveHiddenColumns: computed.filterBy(&#x27;allColumns&#x27;, &#x27;responsiveHidden&#x27;, true).readOnly(),

  /**
   * @property visibleColumns
   * @type {Ember.Array}
   */
  visibleColumns: computed.filterBy(&#x27;allColumns&#x27;, &#x27;isHidden&#x27;, false).readOnly(),

  /**
   * @property visibleColumnGroups
   * @type {Ember.Array}
   */
  visibleColumnGroups: computed(&#x27;columns.[]&#x27;, &#x27;columns.@each.{isHidden,isVisibleGroupColumn}&#x27;, function() {
    return this.columns.reduce((arr, c) =&gt; {
      if (c.get(&#x27;isVisibleGroupColumn&#x27;) || (!c.get(&#x27;isGroupColumn&#x27;) &amp;&amp; !c.get(&#x27;isHidden&#x27;))) {
        arr.pushObject(c);
      }

      return arr;
    }, emberArray([]));
  }).readOnly(),

  /**
   * @property visibleSubColumns
   * @type {Ember.Array}
   */
  visibleSubColumns: computed(&#x27;columns.@each.visibleSubColumns&#x27;, function() {
    return emberArray([].concat(...this.columns.getEach(&#x27;visibleSubColumns&#x27;)));
  }).readOnly(),

  /**
   * @property allColumns
   * @type {Ember.Array}
   */
  allColumns: computed(&#x27;columns.@each.subColumns&#x27;, function() {
    return this.columns.reduce((arr, c) =&gt; {
      arr.pushObjects(c.get(&#x27;isGroupColumn&#x27;) ? c.get(&#x27;subColumns&#x27;) : [c]);
      return arr;
    }, emberArray([]));
  }).readOnly(),

  /**
   * @class Table
   * @constructor
   * @param  {Object} options
   * @param  {Array} options.columns
   * @param  {Array} options.rows
   * @param  {Boolean} options.enableSync If &#x60;true&#x60;, creates a two way sync
   *           between the table&#x27;s rows and the passed rows collection. Also see
   *           &#x60;setRowsSynced(rows)&#x60;.
   * @param  {Object}  options.rowOptions Options hash passed through to
   *           &#x60;createRow(content, options)&#x60;.
   */
  init(options = {}) {
    let { columns = [], rows = [] } = options;
    assert(&#x27;[ember-light-table] columns must be an array if defined&#x27;, isArray(columns));
    assert(&#x27;[ember-light-table] rows must be an array if defined&#x27;, isArray(rows));

    this.setProperties(mergeOptionsWithGlobals(options));

    this.set(&#x27;columns&#x27;, emberArray(Table.createColumns(columns)));

    let _rows = emberArray(Table.createRows(rows, this.rowOptions));

    if (this.enableSync) {
      _rows = RowSyncArrayProxy.create({
        syncArray: rows,
        content: _rows
      });
    }

    this.set(&#x27;rows&#x27;, _rows);
  }
}) {
  destroy() {
    super.destroy(...arguments);

    let { rows } = this;

    if (rows instanceof RowSyncArrayProxy) {
      rows.destroy();
    }
  }

  // Rows

  /**
   * Replace all the row&#x27;s content with content of the argument. If argument is an empty array rows will be cleared.
   * @method setRows
   * @param  {Array} rows
   * @param  {Object} options
   * @return {Array} rows
   */
  setRows(rows = [], options = {}) {
    return this.rows.setObjects(Table.createRows(rows, options));
  }

  /**
   * The same as &#x60;setRows&#x60;, however the given array is synced, meaning that
   * mutating the array also updates the table and vice-versa.
   *
   * Also see &#x60;enableSync&#x60; in the constructor options.
   *
   * @method setRowsSynced
   * @param  {Array} rows
   * @param  {Object} options
   * @return {Array} rows
   */
  setRowsSynced(rows = [], options = {}) {
    let _rows = RowSyncArrayProxy.create({
      syncArray: rows,
      content: emberArray(Table.createRows(rows, options))
    });

    return this.set(&#x27;rows&#x27;, _rows);
  }

  /**
   * Push the object onto the end of the row array if it is not already present.
   * @method addRow
   * @param  {Object} row
   * @param  {Object} options
   */
  addRow(row, options = {}) {
    if (row instanceof Row) {
      this.rows.addObject(row);
    } else if (isNone(this.rows.findBy(&#x27;content&#x27;, row))) {
      this.pushRow(row, options);
    }
  }

  /**
   * Push the objects onto the end of the row array if it is not already present.
   * @method addRows
   * @param  {Array} rows
   * @param  {Object} options
   */
  addRows(rows = [], options = {}) {
    rows.forEach((r) =&gt; this.addRow(r, options));
  }

  /**
   * Push the object onto the end of the row array.
   * @method pushRow
   * @param  {Object} row
   * @param  {Object} options
   * @return {Row} pushed row
   */
  pushRow(row, options = {}) {
    let _row = Table.createRow(row, options);
    this.rows.pushObject(_row);
    return _row;
  }

  /**
   * Push the object onto the end of the row array.
   * @method pushRows
   * @param  {Array}  rows
   * @param  {Object} options
   * @return {Array} pushed rows
   */
  pushRows(rows = [], options = {}) {
    let _rows = Table.createRows(rows, options);
    this.rows.pushObjects(_rows);
    return _rows;
  }

  /**
   * Insert a row at the specified index.
   * @method insertRowAt
   * @param  {Number}  index
   * @param  {Object}  row
   * @param  {Object} options
   * @return {Row} inserted row
   */
  insertRowAt(index, row, options = {}) {
    let _row = Table.createRow(row, options);
    this.rows.insertAt(index, _row);
    return _row;
  }

  /**
   * Remove all occurrences of an object in the rows
   * @method removeRow
   * @param  {Object}  row
   */
  removeRow(row) {
    if (row instanceof Row) {
      this.rows.removeObject(row);
    } else {
      this.rows.removeObjects(this.rows.filterBy(&#x27;content&#x27;, row));
    }
  }

  /**
   * Removes each object in the passed enumerable from the rows.
   * @method removeRows
   * @param  {Array}    rows
   */
  removeRows(rows = []) {
    rows.forEach((r) =&gt; this.removeRow(r));
  }

  /**
   * Remove a row at the specified index
   * @method removeRowAt
   * @param  {Number}  index
   */
  removeRowAt(index) {
    this.rows.removeAt(index);
  }

  /**
   * Select all the rows in the table
   * @method selectAll
   */
  selectAll() {
    this.rows.setEach(&#x27;selected&#x27;, true);
  }

  /**
   * Deselect all the rows in the table
   * @method selectAll
   */
  deselectAll() {
    this.selectedRows.setEach(&#x27;selected&#x27;, false);
  }

  // Columns

  /**
   * Replace all the column&#x27;s content with content of the argument. If argument is an empty array columns will be cleared.
   * @method setColumns
   * @param  {Array} columns
   * @return {Array} columns
   */
  setColumns(columns = []) {
    return this.columns.setObjects(Table.createColumns(columns));
  }

  /**
   * Push the object onto the end of the column array if it is not already present.
   * @method addColumn
   * @param  {Object} column
   */
  addColumn(column) {
    this.columns.addObject(Table.createColumn(column));
  }

  /**
   * Push the objects onto the end of the column array if it is not already present.
   * @method addColumns
   * @param  {Array} columns
   */
  addColumns(columns = []) {
    this.columns.addObjects(Table.createColumns(columns));
  }

  /**
   * Push the object onto the end of the column array.
   * @method pushColumn
   * @param  {Object} column
   * @return {Column} pushed column
   */
  pushColumn(column) {
    let _column = Table.createColumn(column);
    this.columns.pushObject(_column);
    return _column;
  }

  /**
   * Push the object onto the end of the column array.
   * @method pushColumns
   * @param  {Array}  columns
   * @return {Array} pushed columns
   */
  pushColumns(columns = []) {
    let _columns = Table.createColumns(columns);
    this.columns.pushObjects(_columns);
    return _columns;
  }

  /**
   * Insert a column at the specified index.
   * @method insertColumnAt
   * @param  {Number}  index
   * @param  {Object}  column
   * @return {Column} inserted column
   */
  insertColumnAt(index, column) {
    let _column = Table.createColumn(column);
    this.columns.insertAt(index, _column);
    return _column;
  }

  /**
   * Remove all occurrences of an object in the columns
   * @method removeColumn
   * @param  {Object}  column
   */
  removeColumn(column) {
    return this.columns.removeObject(column);
  }

  /**
   * Removes each object in the passed enumerable from the columns.
   * @method removeColumns
   * @param  {Array}    columns
   */
  removeColumns(columns = []) {
    return this.columns.removeObjects(columns);
  }

  /**
   * Remove a column at the specified index
   * @method removeColumnAt
   * @param  {Number}  index
   */
  removeColumnAt(index) {
    this.columns.removeAt(index);
  }

  /**
   * Create a Row object with the given content
   * @method createRow
   * @static
   * @param  {Object}  content
   * @param  {Object}  options
   * @return {Row}
   */
  static createRow(content, options = {}) {
    if (content instanceof Row) {
      return content;
    } else {
      return Row.create(assign({}, options, { content }));
    }
  }

  /**
   * Create a collection of Row objects with the given collection
   * @method createRows
   * @static
   * @param  {Array}  rows
   * @param  {Object} options
   * @return {Array}
   */
  static createRows(rows = [], options = {}) {
    return rows.map((r) =&gt; Table.createRow(r, options));
  }

  /**
   * Create a Column object with the given options
   * @method createColumn
   * @static
   * @param  {Object}  column
   * @return {Column}
   */
  static createColumn(column) {
    if (column instanceof Column) {
      return column;
    } else {
      return Column.create(column);
    }
  }

  /**
   * Create a collection of Column objects with the given collection
   * @method createColumns
   * @static
   * @param  {Array}  columns
   * @return {Array}
   */
  static createColumns(columns = []) {
    return columns.map((c) =&gt; Table.createColumn(c));
  }
}

// https://github.com/offirgolan/ember-light-table/issues/436#issuecomment-310138868
fixProto(Table);

    </pre>
</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/vendor/jquery/jquery.min.js"></script>
    <script src="../assets/vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.js"></script>
    <script src="../assets/vendor/github-slugger/slugger.js"></script>
    <script src="../assets/js/yuidoc-bootstrap.js"></script>
</body>
</html>
